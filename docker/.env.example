# ============================================================================
#                    📦 Moduly 환경 변수 설정 파일
# ============================================================================
# 이 파일을 복사하여 .env로 이름을 변경하고 실제 값을 입력하세요.
# $ cp .env.example .env
#
# ⚠️  주의: .env 파일은 절대로 Git에 커밋하지 마세요!
# ============================================================================


# ============================================================================
#                          🔐 보안 설정 (필수)
# ============================================================================

# JWT 토큰 서명에 사용되는 비밀키
# 🚨 프로덕션에서는 반드시 변경해야 합니다!
# 생성 방법: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-secret-key-change-in-production

# 민감 데이터 암호화에 사용되는 마스터 키 (DB에 저장되는 API 키 암호화 등)
# 생성 방법: python -c "import os, base64; print(base64.b64encode(os.urandom(32)).decode())"
# 이 키를 잃어버리면 암호화된 데이터를 복구할 수 없으니 안전하게 보관하세요!
MASTER_KEY=

# 추가 암호화 키 (레거시 호환용)
ENCRYPTION_KEY=


# ============================================================================
#                        🗄️ 데이터베이스 설정
# ============================================================================
# Docker Compose에서 자동으로 주입되므로 일반적으로 수정할 필요 없음
# 로컬 개발 시 docker-compose.dev.yml의 postgres 서비스 사용

# PostgreSQL 연결 정보 (개별 항목)
# DB_HOST=localhost
# DB_PORT=5432
# DB_USER=admin
# DB_PASSWORD=admin123
# DB_NAME=moduly

# 또는 전체 URL로 설정 (위 개별 항목보다 우선)
# DATABASE_URL=postgresql://admin:admin123@localhost:5432/moduly


# ============================================================================
#                        🏖️ 샌드박스 설정 (코드 실행)
# ============================================================================
# 코드 노드에서 Python 코드를 안전하게 실행하기 위한 샌드박스 서비스

# 샌드박스와 백엔드 간 통신에 사용되는 API 키
# Docker Compose에서는 백엔드와 샌드박스에 동일한 키가 자동 설정됨
SANDBOX_API_KEY=dify-sandbox-key

# 샌드박스 서비스 URL (Docker Compose 내부에서는 자동 설정)
# SANDBOX_URL=http://sandbox:8194


# ============================================================================
#                          🌐 CORS 설정
# ============================================================================
# 프론트엔드에서 백엔드 API에 접근할 수 있는 출처(Origin) 목록
# 쉼표로 구분하여 여러 개 설정 가능

CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000


# ============================================================================
#                       ☁️ AWS 설정 (선택사항)
# ============================================================================
# S3 파일 저장소나 기타 AWS 서비스를 사용할 경우 설정

# AWS 자격 증명
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=ap-northeast-2

# S3 버킷 (파일 업로드에 사용)
# 설정하지 않으면 로컬 파일 시스템 사용 (개발 환경)
S3_BUCKET_NAME=


# ============================================================================
#                        📄 RAG 설정 (선택사항)
# ============================================================================
# 문서 처리 및 RAG(Retrieval Augmented Generation) 기능 관련 설정

# RAG 문서 처리 모드
# - DEV: 개발용 (로컬 파일 시스템 사용)
# - LOCAL: 로컬 문서 처리 (로컬 임베딩)
# - CLOUD: 클라우드 서비스 사용 (LlamaCloud 등)
RAG_INGESTION_MODE=DEV

# LlamaCloud API 키 (CLOUD 모드 사용 시 필요)
# https://cloud.llamaindex.ai/ 에서 발급받을 수 있습니다
LLAMA_CLOUD_API_KEY=


# ============================================================================
#                        🔧 기타 설정
# ============================================================================

# 로그 레벨 (DEBUG, INFO, WARNING, ERROR)
# LOG_LEVEL=INFO

# 타임존 (스케줄러, 로그 등에 사용)
TZ=Asia/Seoul
