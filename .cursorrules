# Project Rules (Auto-Loaded Context)

## 1. Global Communication Rules
- **Language**: 모든 대화와 주석, 문서는 반드시 **한국어(Korean)**로 작성해야 합니다.
- **Tone**: 정중하고 도움이 되는 태도(Polite & Helpful)를 유지합니다.
- **Answer Style**: 명확하고 간결하게 답변하며, 불필요한 서론을 줄입니다.

## 2. Technology Stack

### Client (`apps/client`)
- **Framework**: Next.js 16 (App Router)
- **Library**: React 19
- **Styling**: Tailwind CSS v4
- **State Management**: Zustand
- **Language**: TypeScript

### Server (`apps/server`)
- **Language**: Python 3.x
- **Framework**: FastAPI
- **Validation**: Pydantic v2
- **Linter/Formatter**: Ruff

## 3. Directory Structure & Architecture

### [Client] `apps/client`

**1. `app/` (Routing & Layout)**
- **역할**: Next.js App Router 진입점 (URL 생성).
- **규칙**: 복잡한 로직을 배제하고, `features`의 컴포넌트를 가져와 조립(Composition)만 합니다.
- **⚠️ 주의 (Route vs Feature)**:
  - `app/workflows/`: **[Route]** URL 경로(`localhost/workflows/...`)를 담당하는 껍데기입니다. 비즈니스 로직을 넣지 마세요.

**2. `app/features/` (Main Business Logic) ⭐️**
- **역할**: 실제 비즈니스 로직과 기능의 본체가 위치하는 곳.
- **규칙**: 도메인별로 폴더를 나누어 관리합니다.
- **예시**: `app/features/workflow/` **[Feature]** (단수형)
  - `components/`: 기능 전용 UI (Canvas, Node 등)
  - `hooks/`: 상태 관리 및 로직 (`useWorkflowStore`)
  - `api/`: API 연동

**3. `lib/` (Shared Utilities & UI)**
- **역할**: 라우팅과 무관한 프로젝트 공통 요소.
- **구조**:
  - `components/`: 재사용 가능한 UI (디자인 시스템)
  - `utils/`: 공통 유틸리티 함수
  - `types/`: 전역 공통 타입

### [Server] `apps/server`

**1. `api/` (Interface Layer)**
- HTTP 요청/응답 처리. 비즈니스 로직 없이 Service 호출 위주.

**2. `services/` (Application Layer)**
- 비즈니스 로직, 트랜잭션 관리, 데이터 조작 조율.

**3. `workflow/` (Domain Engine Layer) ⭐️**
- 워크플로우 실행 엔진 핵심 로직.
- `core/`: 엔진, 그래프 순회 로직.
- `nodes/`: 노드별 실행 구현체.

**4. `db/` (Data Access Layer)**
- SQLAlchemy 모델(`models/`) 및 DB 세션 관리.

**5. `schemas/` (DTO)**
- Pydantic 데이터 검증 및 API 입출력 모델.

## 4. Workflow & Code Modification Policy
1.  **Read-Only Default**: 명시적인 요청이 없으면 파일을 자동으로 수정하지 않습니다.
2.  **Propose First**: 코드 변경이 필요할 때는 변경 사항을 먼저 제안하고, **유저의 승인**을 기다립니다.
3.  **Plan First**: 복잡한 작업(새 기능, 대규모 리팩토링) 시에는 `implementation_plan.md`를 먼저 작성하여 방향성을 검증받습니다.

## 5. Coding Standards
- **General**: 모든 코드는 실제 작동 가능해야 하며(placeholder 지양), 프로젝트의 기존 스타일을 존중합니다.
- **Naming**: 명확하고 설명적인 변수/함수명을 사용합니다.
